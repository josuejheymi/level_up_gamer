<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle Producto - Level-Up Gamer</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .product-detail { padding: 4rem 0; }
        .product-container { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; }
        .product-gallery { position: relative; }
        .product-main-image { width: 100%; height: 400px; object-fit: cover; border-radius: 8px; }
        .product-thumbnails { display: flex; gap: 1rem; margin-top: 1rem; }
        .product-thumbnail { width: 80px; height: 80px; object-fit: cover; border-radius: 4px; cursor: pointer; opacity: 0.7; transition: opacity 0.3s; }
        .product-thumbnail:hover, .product-thumbnail.active { opacity: 1; }
        .product-info h1 { font-size: 2.5rem; margin-bottom: 0.5rem; color: var(--accent-blue); }
        .product-category { color: var(--text-secondary); margin-bottom: 1rem; display: block; }
        .product-price { font-size: 2rem; color: var(--accent-green); margin-bottom: 1.5rem; }
        .product-description { margin-bottom: 2rem; line-height: 1.6; color: var(--text-secondary); }
        .product-actions { display: flex; gap: 1rem; margin-bottom: 2rem; }
        .quantity-selector { display: flex; align-items: center; background-color: #1a1a1a; border-radius: 4px; padding: 0.5rem; }
        .quantity-btn { background: none; border: none; color: var(--text-primary); font-size: 1.2rem; cursor: pointer; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; }
        .quantity-input { width: 50px; text-align: center; background: none; border: none; color: var(--text-primary); font-size: 1.1rem; }
        .add-to-cart-btn { flex: 1; padding: 0.8rem 2rem; background-color: var(--accent-blue); color: white; border: none; border-radius: 4px; font-size: 1.1rem; cursor: pointer; transition: background-color 0.3s; }
        .add-to-cart-btn:hover { background-color: var(--accent-green); color: var(--bg-primary); }
    </style>
</head>
<body>
<header>
    <div class="container">
        <div class="logo"><h1>LEVEL-UP GAMER</h1></div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="blogs.html">Blogs</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </nav>
        <div class="user-cart">
            <a href="carrito.html" class="cart">Carrito (<span id="cart-count">0</span>)</a>
            <a href="login.html" class="login">Iniciar Sesión</a>
        </div>
    </div>
</header>

<main>
    <section class="product-detail">
        <div class="container product-container">
            <div class="product-gallery">
                <img src="" alt="" class="product-main-image" id="main-image">
                <div class="product-thumbnails" id="thumbnails"></div>
            </div>
            <div class="product-info">
                <h1></h1>
                <span class="product-category"></span>
                <div class="product-price"></div>
                <p class="product-description"></p>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <button class="quantity-btn" id="decrease-qty">-</button>
                        <input type="text" class="quantity-input" id="quantity" value="1" min="1" max="10">
                        <button class="quantity-btn" id="increase-qty">+</button>
                    </div>
                    <button class="add-to-cart-btn" id="add-to-cart">Añadir al Carrito</button>
                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <div class="container">
        <p>&copy; 2024 Level-Up Gamer. Todos los derechos reservados.</p>
    </div>
</footer>

<!-- JS productos -->
<script src="js/productos.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const productId = parseInt(urlParams.get('id'));
    const product = productos.find(p => p.id === productId);

    if (!product) {
        document.querySelector('.product-container').innerHTML = '<p>Producto no encontrado.</p>';
        return;
    }

    // Actualizar contenido
    document.querySelector('.product-info h1').textContent = product.nombre;
    document.querySelector('.product-info .product-category').textContent = product.categoria;
    document.querySelector('.product-info .product-price').textContent = `$${product.precio.toLocaleString('es-CL')} CLP`;
    document.querySelector('.product-info .product-description').textContent = product.descripcion;
    document.getElementById('main-image').src = product.imagen;

    // Miniaturas (aquí usamos solo la imagen principal)
    const thumbnailsDiv = document.getElementById('thumbnails');
    thumbnailsDiv.innerHTML = `
        <img src="${product.imagen}" alt="${product.nombre}" class="product-thumbnail active" data-image="${product.imagen}">
    `;

    // Cambiar imagen principal al hacer clic
    thumbnailsDiv.querySelectorAll('.product-thumbnail').forEach(thumbnail => {
        thumbnail.addEventListener('click', function() {
            document.getElementById('main-image').src = this.dataset.image;
            thumbnailsDiv.querySelectorAll('.product-thumbnail').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Controlar cantidad
    document.getElementById('decrease-qty').addEventListener('click', function() {
        const quantityInput = document.getElementById('quantity');
        let value = parseInt(quantityInput.value);
        if (value > 1) quantityInput.value = value - 1;
    });

    document.getElementById('increase-qty').addEventListener('click', function() {
        const quantityInput = document.getElementById('quantity');
        let value = parseInt(quantityInput.value);
        if (value < 10) quantityInput.value = value + 1;
    });

    // Añadir al carrito
    document.getElementById('add-to-cart').addEventListener('click', function() {
        const quantity = parseInt(document.getElementById('quantity').value);
        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        const productoExistente = carrito.find(item => item.id === product.id);

        if (productoExistente) {
            productoExistente.cantidad += quantity;
        } else {
            carrito.push({
                id: product.id,
                nombre: product.nombre,
                precio: product.precio,
                imagen: product.imagen,
                cantidad: quantity
            });
        }

        localStorage.setItem('carrito', JSON.stringify(carrito));

        // Actualizar contador
        const totalItems = carrito.reduce((total, item) => total + item.cantidad, 0);
        document.querySelectorAll('#cart-count').forEach(el => el.textContent = totalItems);

        alert(`¡${quantity} ${product.nombre} añadido(s) al carrito!`);
    });

    // Contador carrito al cargar
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const totalItems = carrito.reduce((total, item) => total + item.cantidad, 0);
    document.querySelectorAll('#cart-count').forEach(el => el.textContent = totalItems);
});
</script>
</body>
</html>
